<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPTV Player</title>
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1c1c1c;
            color: white;
            margin: 0;
            padding: 0;
            text-align: center;
        }
        .container {
            padding: 20px;
        }
        .video-container {
            margin: 20px auto;
            max-width: 800px;
        }
        video {
            width: 100%;
            max-width: 800px;
            height: 400px;
            border: 2px solid white;
            border-radius: 8px;
        }
        ul {
            list-style: none;
            padding: 0;
        }
        li {
            margin: 10px 0;
        }
        a {
            color: #007BFF;
            text-decoration: none;
            font-size: 16px;
        }
        a:hover {
            color: #0056b3;
        }
    </style>
</head>
<body>
    <header>
        <h1>IPTV Player</h1>
        <p>Reproduza sua lista IPTV diretamente no navegador</p>
    </header>
    <div class="container">
        <h2>Lista de Canais</h2>
        <ul id="channelList">Carregando...</ul>
        <div class="video-container">
            <video id="videoPlayer" class="video-js" controls preload="auto" data-setup="{}">
                Seu navegador não suporta reprodução de vídeo.
            </video>
        </div>
    </div>
    <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
    <script>
        async function loadM3U() {
            // URL da lista M3U fornecida
            const response = await fetch('http://bit.ly/tvmeutedio');
            const m3uContent = await response.text();
            const lines = m3uContent.split('\n');
            const channelList = document.getElementById('channelList');

            channelList.innerHTML = ''; // Limpa a lista inicial
            let currentChannelName = '';

            lines.forEach(line => {
                if (line.startsWith('#EXTINF')) {
                    // Extrai o nome do canal
                    currentChannelName = line.split(',')[1];
                } else if (line.startsWith('http')) {
                    // Cria o elemento da lista com link para o canal
                    const listItem = document.createElement('li');
                    const link = document.createElement('a');
                    link.textContent = currentChannelName || 'Canal sem nome';
                    link.href = '#';
                    link.onclick = () => playStream(line);
                    listItem.appendChild(link);
                    channelList.appendChild(listItem);
                }
            });
        }

        function playStream(url) {
            const videoPlayer = document.getElementById('videoPlayer');
            videoPlayer.src = url;
            videoPlayer.play();
        }

        // Carrega a lista ao iniciar
        loadM3U();
    </script>
</body>
</html>